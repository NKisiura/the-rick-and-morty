import{a as b}from"./chunk-YNW56KSJ.js";import{a as P}from"./chunk-O5AGI4DW.js";import"./chunk-UBLMH3VJ.js";import{a as D,b as j,e as A,h as R,r as w,s as O}from"./chunk-N77CJIUJ.js";import"./chunk-VZYJC24G.js";import"./chunk-SELDRIOR.js";import"./chunk-DUXSHKKQ.js";import{Gb as M,Hb as I,Ka as a,Ya as h,_ as m,_a as v,aa as u,bb as n,db as y,ea as C,eb as _,fb as g,gb as E,hb as p,ka as s,l as L,oa as F,ob as x,p as f,zb as T}from"./chunk-7XFWTFYN.js";import{a as c,b as l}from"./chunk-35PI25VP.js";var q={favouriteEpisodes:[],isLoading:!1,error:null},S=(()=>{let e=class e extends D{constructor(){super(q),this.localStorageService=s(A),this.episodesApiService=s(P),this.favouriteEpisodes=this.selectSignal(({favouriteEpisodes:t})=>t),this.hasFavouriteEpisodes=this.selectSignal(this.favouriteEpisodes,t=>t.length),this.isLoading=this.selectSignal(({isLoading:t})=>t),this.error=this.selectSignal(({error:t})=>t),this.favouriteEpisodesRequested=this.effect(t=>t.pipe(u(()=>this.patchState({isLoading:!0})),m(()=>f(this.localStorageService.getItem(R)||[])),m(o=>o.length?this.episodesApiService.getEpisodesByIdList(o).pipe(j(r=>{this.favouriteEpisodesSucceeded(r)},({error:r})=>{this.favouriteEpisodesFailed(r)})):f(L)),u(()=>this.patchState({isLoading:!1})))),this.favouriteEpisodesSucceeded=this.updater((t,o)=>l(c({},t),{favouriteEpisodes:[...o],error:null})),this.favouriteEpisodesFailed=this.updater((t,o)=>l(c({},t),{error:o,favouriteEpisodes:[]}))}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=C({token:e,factory:e.\u0275fac});let i=e;return i})();var Y=(i,e)=>e.id;function $(i,e){i&1&&p(0,"loader")}function B(i,e){i&1&&(g(0,"div",0),T(1," There is no favourite episodes yet "),E())}function K(i,e){if(i&1&&p(0,"episode-card",2),i&2){let d=e.$implicit;v("episode",d)}}function U(i,e){if(i&1&&p(0,"error-message",3),i&2){let d=x();v("errorMessage",d.error().error)}}var ae=(()=>{let e=class e{constructor(){this.favouriteEpisodeListStore=s(S),this.favouriteEpisodes=this.favouriteEpisodeListStore.favouriteEpisodes,this.hasFavouriteEpisodes=this.favouriteEpisodeListStore.hasFavouriteEpisodes,this.isLoading=this.favouriteEpisodeListStore.isLoading,this.error=this.favouriteEpisodeListStore.error}ngOnInit(){this.favouriteEpisodeListStore.favouriteEpisodesRequested()}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=F({type:e,selectors:[["ng-component"]],standalone:!0,features:[M([S]),I],decls:6,vars:3,consts:[[1,"text-center","font-primary","text-lg","text-primary"],[1,"grid","grid-cols-1","gap-4","sm:grid-cols-2","lg:grid-cols-3","lg:gap-6","2xl:grid-cols-4"],[3,"episode"],[3,"errorMessage"]],template:function(o,r){o&1&&(h(0,$,1,0,"loader")(1,B,2,0,"div",0),g(2,"div",1),y(3,K,1,1,"episode-card",2,Y),E(),h(5,U,1,1,"error-message",3)),o&2&&(n(0,r.isLoading()?0:-1),a(),n(1,!r.hasFavouriteEpisodes()&&!r.isLoading()&&!r.error()?1:-1),a(2),_(r.favouriteEpisodes()),a(2),n(5,r.error()&&!r.isLoading()?5:-1))},dependencies:[w,O,b],changeDetection:0});let i=e;return i})();export{ae as FavouriteEpisodeListComponent};
