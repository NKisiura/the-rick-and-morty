import{a as j}from"./chunk-OPXSG5Y2.js";import{a as k,b as q}from"./chunk-OD42XJDA.js";import"./chunk-XDWRJOZU.js";import"./chunk-COXDFDNR.js";import{a as A,b as L,l as w,m as R}from"./chunk-XOLOHFGZ.js";import"./chunk-6RRLMYQ5.js";import"./chunk-BUYXJ4OI.js";import"./chunk-NEX2WLXG.js";import"./chunk-NIWLSCTU.js";import{$b as u,Bb as b,Cb as T,Db as c,Eb as l,Fb as d,Ia as F,Ob as v,Zb as h,_ as x,aa as C,eb as r,ec as P,fa as I,fc as M,la as g,pa as D,qa as B,ub as S,wb as f,zb as s}from"./chunk-4ZLDDYG2.js";import{a as p,b as m}from"./chunk-55KE2TB7.js";var W={locationLoading:!1,location:null,locationError:null,charactersLoading:!1,characters:null,charactersError:null},y=(()=>{let i=class i extends A{constructor(){super(W),this.locationsApiService=g(j),this.charactersApiService=g(k),this.location=this.selectSignal(({location:t})=>t),this.locationLoading=this.selectSignal(({locationLoading:t})=>t),this.locationError=this.selectSignal(({locationError:t})=>t),this.characters=this.selectSignal(({characters:t})=>t),this.charactersLoading=this.selectSignal(({charactersLoading:t})=>t),this.charactersError=this.selectSignal(({charactersError:t})=>t),this.locationWithCharactersByIdRequested=this.effect(t=>t.pipe(C(()=>this.patchState({locationLoading:!0})),x(a=>this.locationsApiService.getLocationById(a).pipe(L(o=>{this.locationByIdSucceeded(o),o.residentIds.length&&this.locationCharactersByIdListRequested(o.residentIds)},({error:o})=>{this.locationByIdFailed(o)}))))),this.locationCharactersByIdListRequested=this.effect(t=>t.pipe(C(()=>this.patchState({charactersLoading:!0})),x(a=>this.charactersApiService.getCharactersByIdList(a).pipe(L(o=>{this.locationCharactersSucceeded(o)},({error:o})=>{this.locationCharactersFailed(o)}))))),this.locationByIdSucceeded=this.updater((t,a)=>m(p({},t),{locationLoading:!1,location:a,locationError:null})),this.locationByIdFailed=this.updater((t,a)=>m(p({},t),{locationLoading:!1,location:null,locationError:a})),this.locationCharactersSucceeded=this.updater((t,a)=>m(p({},t),{charactersLoading:!1,characters:a,charactersError:null})),this.locationCharactersFailed=this.updater((t,a)=>m(p({},t),{charactersLoading:!1,characters:null,charactersError:a}))}};i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=I({token:i,factory:i.\u0275fac});let e=i;return e})();var $=(e,i)=>i.id;function O(e,i){e&1&&d(0,"loader")}function G(e,i){if(e&1&&(c(0,"div",4)(1,"div",6),h(2),l(),c(3,"h1",7),h(4),l(),c(5,"div")(6,"div",8),h(7,"Dimension:"),l(),c(8,"div",9),h(9),l()()()),e&2){let n=i;r(2),u(" ",n.type||"unknown"," "),r(2),u(" ",n.name," "),r(5),u(" ",n.dimension||"unknown"," ")}}function H(e,i){if(e&1&&d(0,"error-message",5),e&2){let n=v();f("errorMessage",n.locationError().error)}}function J(e,i){e&1&&d(0,"loader")}function K(e,i){if(e&1&&d(0,"character-card",12),e&2){let n=i.$implicit;f("character",n)}}function N(e,i){e&1&&(c(0,"div",3)(1,"h2",10),h(2," Characters from this location "),l(),c(3,"div",11),b(4,K,1,1,"character-card",12,$),l()()),e&2&&(r(4),T(i))}function Q(e,i){if(e&1&&d(0,"error-message",5),e&2){let n=v();f("errorMessage",n.locationCharactersError().error)}}var dt=(()=>{let i=class i{constructor(){this.locationDetailsStore=g(y),this.locationId=F.required({transform:t=>+t}),this.location=this.locationDetailsStore.location,this.locationLoading=this.locationDetailsStore.locationLoading,this.locationError=this.locationDetailsStore.locationError,this.locationCharacters=this.locationDetailsStore.characters,this.locationCharactersLoading=this.locationDetailsStore.charactersLoading,this.locationCharactersError=this.locationDetailsStore.charactersError}ngOnInit(){this.locationDetailsStore.locationWithCharactersByIdRequested(this.locationId())}};i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=B({type:i,selectors:[["app-location-details"]],inputs:{locationId:[D.SignalBased,"locationId"]},standalone:!0,features:[P([y]),M],decls:11,vars:6,consts:[[1,"py-4","lg:py-6"],[1,"container"],[1,"flex","flex-col","gap-8","lg:gap-16"],[1,"flex","flex-col","gap-4","lg:gap-6"],[1,"flex","flex-col","items-start","gap-2","rounded-xl","bg-light-blue/10","p-4","font-primary","text-primary","lg:gap-4","lg:p-6"],[3,"errorMessage"],[1,"rounded-lg","bg-accent","px-2","py-0.5","text-sm","capitalize","text-dark-blue","lg:px-3","lg:text-base"],[1,"text-3xl","font-bold","sm:text-4xl","lg:text-5xl","xl:text-6xl"],[1,"font-light","text-blue","lg:text-lg"],[1,"text-lg","capitalize","lg:text-xl"],[1,"text-center","font-decorative","text-3xl","text-primary","sm:text-4xl","lg:text-5xl"],[1,"grid","grid-cols-1","gap-4","lg:grid-cols-2","lg:gap-6"],[3,"character"]],template:function(a,o){if(a&1&&(c(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),S(4,O,1,0,"loader")(5,G,10,3,"div",4)(6,H,1,1,"error-message",5),l(),c(7,"div",3),S(8,J,1,0,"loader")(9,N,6,0,"div",3)(10,Q,1,1,"error-message",5),l()()()()),a&2){let _,E;r(4),s(4,o.locationLoading()?4:-1),r(),s(5,(_=o.location())?5:-1,_),r(),s(6,o.locationError()&&!o.locationLoading()?6:-1),r(2),s(8,o.locationCharactersLoading()?8:-1),r(),s(9,(E=o.locationCharacters())?9:-1,E),r(),s(10,o.locationCharactersError()&&!o.locationCharactersLoading()?10:-1)}},dependencies:[q,R,w],changeDetection:0});let e=i;return e})();export{dt as LocationDetailsPageComponent};
