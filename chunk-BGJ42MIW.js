import{a as j,b}from"./chunk-5IP64JJY.js";import"./chunk-OLQBKCZU.js";import"./chunk-UBLMH3VJ.js";import{a as R,b as I,e as D,g as w,r as k,s as q}from"./chunk-N77CJIUJ.js";import"./chunk-VZYJC24G.js";import"./chunk-SELDRIOR.js";import"./chunk-DUXSHKKQ.js";import{Gb as M,Hb as A,Ka as s,Ya as d,_ as u,_a as C,aa as m,bb as n,db as _,ea as F,eb as T,fb as v,gb as g,hb as c,ka as o,l as L,oa as y,ob as x,p as f,zb as E}from"./chunk-7XFWTFYN.js";import{a as p,b as l}from"./chunk-35PI25VP.js";var P={favouriteCharacters:[],isLoading:!1,error:null},S=(()=>{let e=class e extends R{constructor(){super(P),this.localStorageService=o(D),this.charactersApiService=o(j),this.favouriteCharacters=this.selectSignal(({favouriteCharacters:r})=>r),this.hasFavouriteCharacters=this.selectSignal(this.favouriteCharacters,r=>!!r.length),this.isLoading=this.selectSignal(({isLoading:r})=>r),this.error=this.selectSignal(({error:r})=>r),this.favouriteCharactersRequested=this.effect(r=>r.pipe(m(()=>this.patchState({isLoading:!0})),u(()=>f(this.localStorageService.getItem(w)||[])),u(i=>i.length?this.charactersApiService.getCharactersByIdList(i).pipe(I(a=>{this.favouriteCharactersSucceeded(a)},({error:a})=>{this.favouriteCharactersFailed(a)})):f(L)),m(()=>this.patchState({isLoading:!1})))),this.favouriteCharactersSucceeded=this.updater((r,i)=>l(p({},r),{favouriteCharacters:[...i],error:null})),this.favouriteCharactersFailed=this.updater((r,i)=>l(p({},r),{error:i,favouriteCharacters:[]}))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=F({token:e,factory:e.\u0275fac});let t=e;return t})();var Y=(t,e)=>e.id;function $(t,e){t&1&&c(0,"loader")}function B(t,e){t&1&&(v(0,"div",0),E(1," There is no favourite characters yet "),g())}function H(t,e){if(t&1&&c(0,"character-card",2),t&2){let h=e.$implicit;C("character",h)}}function K(t,e){if(t&1&&c(0,"error-message",3),t&2){let h=x();C("errorMessage",h.error().error)}}var se=(()=>{let e=class e{constructor(){this.favouriteCharacterListStore=o(S),this.favouriteCharacters=this.favouriteCharacterListStore.favouriteCharacters,this.hasFavouriteCharacters=this.favouriteCharacterListStore.hasFavouriteCharacters,this.isLoading=this.favouriteCharacterListStore.isLoading,this.error=this.favouriteCharacterListStore.error}ngOnInit(){this.favouriteCharacterListStore.favouriteCharactersRequested()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=y({type:e,selectors:[["ng-component"]],standalone:!0,features:[M([S]),A],decls:6,vars:3,consts:[[1,"text-center","font-primary","text-lg","text-primary"],[1,"grid","grid-cols-1","gap-4","lg:grid-cols-2","lg:gap-6"],[3,"character"],[3,"errorMessage"]],template:function(i,a){i&1&&(d(0,$,1,0,"loader")(1,B,2,0,"div",0),v(2,"div",1),_(3,H,1,1,"character-card",2,Y),g(),d(5,K,1,1,"error-message",3)),i&2&&(n(0,a.isLoading()?0:-1),s(),n(1,!a.hasFavouriteCharacters()&&!a.isLoading()&&!a.error()?1:-1),s(2),T(a.favouriteCharacters()),s(2),n(5,a.error()&&!a.isLoading()?5:-1))},dependencies:[b,k,q],changeDetection:0});let t=e;return t})();export{se as FavouriteCharacterListComponent};
