import{a as k}from"./chunk-SDCNU222.js";import{a as b}from"./chunk-72HK74FD.js";import"./chunk-OLQBKCZU.js";import{a as A,b as j,e as D,i as O,r as R,s as w}from"./chunk-N77CJIUJ.js";import"./chunk-VZYJC24G.js";import"./chunk-SELDRIOR.js";import"./chunk-DUXSHKKQ.js";import{Gb as E,Hb as I,Ka as n,Ya as L,_ as m,_a as h,aa as u,bb as s,db as _,ea as F,eb as T,fb as v,gb as g,hb as c,ka as a,l as C,oa as y,ob as x,p as d,zb as M}from"./chunk-7XFWTFYN.js";import{a as p,b as f}from"./chunk-35PI25VP.js";var P={favouriteLocations:[],isLoading:!1,error:null},S=(()=>{let t=class t extends A{constructor(){super(P),this.localStorageService=a(D),this.locationsApiService=a(b),this.favouriteLocations=this.selectSignal(({favouriteLocations:e})=>e),this.hasFavouriteLocations=this.selectSignal(this.favouriteLocations,e=>e.length),this.isLoading=this.selectSignal(({isLoading:e})=>e),this.error=this.selectSignal(({error:e})=>e),this.favouriteLocationsRequested=this.effect(e=>e.pipe(u(()=>this.patchState({isLoading:!0})),m(()=>d(this.localStorageService.getItem(O)||[])),m(o=>o.length?this.locationsApiService.getLocationsByIdList(o).pipe(j(r=>{this.favouriteLocationsSucceeded(r)},({error:r})=>{this.favouriteLocationsFailed(r)})):d(C)),u(()=>this.patchState({isLoading:!1})))),this.favouriteLocationsSucceeded=this.updater((e,o)=>f(p({},e),{favouriteLocations:[...o],error:null})),this.favouriteLocationsFailed=this.updater((e,o)=>f(p({},e),{error:o,favouriteLocations:[]}))}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=F({token:t,factory:t.\u0275fac});let i=t;return i})();var Y=(i,t)=>t.id;function $(i,t){i&1&&c(0,"loader")}function B(i,t){i&1&&(v(0,"div",0),M(1," There is no favourite locations yet "),g())}function K(i,t){if(i&1&&c(0,"location-card",2),i&2){let l=t.$implicit;h("location",l)}}function N(i,t){if(i&1&&c(0,"error-message",3),i&2){let l=x();h("errorMessage",l.error().error)}}var nt=(()=>{let t=class t{constructor(){this.favouriteLocationListStore=a(S),this.favouriteLocations=this.favouriteLocationListStore.favouriteLocations,this.hasFavouriteLocations=this.favouriteLocationListStore.hasFavouriteLocations,this.isLoading=this.favouriteLocationListStore.isLoading,this.error=this.favouriteLocationListStore.error}ngOnInit(){this.favouriteLocationListStore.favouriteLocationsRequested()}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=y({type:t,selectors:[["ng-component"]],standalone:!0,features:[E([S]),I],decls:6,vars:3,consts:[[1,"text-center","font-primary","text-lg","text-primary"],[1,"grid","grid-cols-1","gap-4","sm:grid-cols-2","lg:grid-cols-3","lg:gap-6","2xl:grid-cols-4"],[3,"location"],[3,"errorMessage"]],template:function(o,r){o&1&&(L(0,$,1,0,"loader")(1,B,2,0,"div",0),v(2,"div",1),_(3,K,1,1,"location-card",2,Y),g(),L(5,N,1,1,"error-message",3)),o&2&&(s(0,r.isLoading()?0:-1),n(),s(1,!r.hasFavouriteLocations()&&!r.isLoading()&&!r.error()?1:-1),n(2),T(r.favouriteLocations()),n(2),s(5,r.error()&&!r.isLoading()?5:-1))},dependencies:[R,w,k],changeDetection:0});let i=t;return i})();export{nt as FavouriteLocationListComponent};
