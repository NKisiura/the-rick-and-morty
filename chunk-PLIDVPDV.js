import{a as k,b as w}from"./chunk-OD42XJDA.js";import"./chunk-XDWRJOZU.js";import{a as O}from"./chunk-TMROHDPB.js";import"./chunk-COXDFDNR.js";import{a as j,b as E,l as W,m as $}from"./chunk-XOLOHFGZ.js";import"./chunk-6RRLMYQ5.js";import"./chunk-BUYXJ4OI.js";import"./chunk-NEX2WLXG.js";import{i as R}from"./chunk-NIWLSCTU.js";import{$b as x,Bb as M,Cb as b,Db as n,Eb as d,Fb as c,Ia as F,Ob as u,Zb as l,_ as C,aa as S,eb as o,ec as P,fa as I,fc as T,kc as A,la as g,lc as q,pa as L,qa as B,ub as v,wb as f,zb as p}from"./chunk-4ZLDDYG2.js";import{a as h,b as m}from"./chunk-55KE2TB7.js";var G={episodeLoading:!1,episode:null,episodeError:null,charactersLoading:!1,characters:null,charactersError:null},_=(()=>{let i=class i extends j{constructor(){super(G),this.episodesApiService=g(O),this.charactersApiService=g(k),this.episode=this.selectSignal(({episode:e})=>e),this.episodeLoading=this.selectSignal(({episodeLoading:e})=>e),this.episodeError=this.selectSignal(({episodeError:e})=>e),this.characters=this.selectSignal(({characters:e})=>e),this.charactersLoading=this.selectSignal(({charactersLoading:e})=>e),this.charactersError=this.selectSignal(({charactersError:e})=>e),this.episodeWithCharactersByIdRequested=this.effect(e=>e.pipe(S(()=>this.patchState({episodeLoading:!0})),C(r=>this.episodesApiService.getEpisodeById(r).pipe(E(a=>{this.episodeByIdSucceeded(a),this.episodeCharactersByIdListRequested(a.characterIds)},({error:a})=>{this.episodeByIdFailed(a)}))))),this.episodeCharactersByIdListRequested=this.effect(e=>e.pipe(S(()=>this.patchState({charactersLoading:!0})),C(r=>this.charactersApiService.getCharactersByIdList(r).pipe(E(a=>{this.episodeCharactersSucceeded(a)},({error:a})=>{this.episodeCharactersFailed(a)}))))),this.episodeByIdSucceeded=this.updater((e,r)=>m(h({},e),{episodeLoading:!1,episode:r,episodeError:null})),this.episodeByIdFailed=this.updater((e,r)=>m(h({},e),{episodeLoading:!1,episode:null,episodeError:r})),this.episodeCharactersSucceeded=this.updater((e,r)=>m(h({},e),{charactersLoading:!1,characters:r,charactersError:null})),this.episodeCharactersFailed=this.updater((e,r)=>m(h({},e),{charactersLoading:!1,characters:null,charactersError:r}))}};i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=I({token:i,factory:i.\u0275fac});let t=i;return t})();var H=(t,i)=>i.id;function J(t,i){t&1&&c(0,"loader")}function K(t,i){if(t&1&&(n(0,"div",4)(1,"div",6),l(2),d(),n(3,"h1",7),l(4),d(),n(5,"div")(6,"div",8),l(7,"Air Date:"),d(),n(8,"div",9),l(9),A(10,"date"),d()()()),t&2){let s=i,e=u();o(2),x(" ",s.episode," "),o(2),x(" ",s.name," "),o(5),x(" ",q(10,3,s.airDate,e.dateFormat)," ")}}function N(t,i){if(t&1&&c(0,"error-message",5),t&2){let s=u();f("errorMessage",s.episodeError().error)}}function Q(t,i){t&1&&c(0,"loader")}function U(t,i){if(t&1&&c(0,"character-card",12),t&2){let s=i.$implicit;f("character",s)}}function V(t,i){t&1&&(n(0,"div",3)(1,"h2",10),l(2," Characters in this episode "),d(),n(3,"div",11),M(4,U,1,1,"character-card",12,H),d()()),t&2&&(o(4),b(i))}function X(t,i){if(t&1&&c(0,"error-message",5),t&2){let s=u();f("errorMessage",s.episodeCharactersError().error)}}var ge=(()=>{let i=class i{constructor(){this.episodeDetailsStore=g(_),this.dateFormat="MMMM d, y",this.episodeId=F.required({transform:e=>+e}),this.episode=this.episodeDetailsStore.episode,this.episodeLoading=this.episodeDetailsStore.episodeLoading,this.episodeError=this.episodeDetailsStore.episodeError,this.episodeCharacters=this.episodeDetailsStore.characters,this.episodeCharactersLoading=this.episodeDetailsStore.charactersLoading,this.episodeCharactersError=this.episodeDetailsStore.charactersError}ngOnInit(){this.episodeDetailsStore.episodeWithCharactersByIdRequested(this.episodeId())}};i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=B({type:i,selectors:[["app-episode-details"]],inputs:{episodeId:[L.SignalBased,"episodeId"]},standalone:!0,features:[P([_]),T],decls:11,vars:6,consts:[[1,"py-4","lg:py-6"],[1,"container"],[1,"flex","flex-col","gap-8","lg:gap-16"],[1,"flex","flex-col","gap-4","lg:gap-6"],[1,"flex","flex-col","items-start","gap-2","rounded-xl","bg-light-blue/10","p-4","font-primary","text-primary","lg:gap-4","lg:p-6"],[3,"errorMessage"],[1,"rounded-lg","bg-accent","px-2","py-0.5","text-sm","text-dark-blue","lg:px-3","lg:text-base"],[1,"text-3xl","font-bold","sm:text-4xl","lg:text-5xl","xl:text-6xl"],[1,"font-light","text-blue","lg:text-lg"],[1,"text-lg","lg:text-xl"],[1,"text-center","font-decorative","text-3xl","text-primary","sm:text-4xl","lg:text-5xl"],[1,"grid","grid-cols-1","gap-4","lg:grid-cols-2","lg:gap-6"],[3,"character"]],template:function(r,a){if(r&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),v(4,J,1,0,"loader")(5,K,11,6,"div",4)(6,N,1,1,"error-message",5),d(),n(7,"div",3),v(8,Q,1,0,"loader")(9,V,6,0,"div",3)(10,X,1,1,"error-message",5),d()()()()),r&2){let y,D;o(4),p(4,a.episodeLoading()?4:-1),o(),p(5,(y=a.episode())?5:-1,y),o(),p(6,a.episodeError()&&!a.episodeLoading()?6:-1),o(2),p(8,a.episodeCharactersLoading()?8:-1),o(),p(9,(D=a.episodeCharacters())?9:-1,D),o(),p(10,a.episodeCharactersError()&&!a.episodeCharactersLoading()?10:-1)}},dependencies:[R,W,$,w],changeDetection:0});let t=i;return t})();export{ge as EpisodeDetailsPageComponent};
